<div class="card">
    <div class="card-body">
        <h5 class="card-title">
            <%= proposal.title %>
        </h5>
        <p class="card-text">
            <%- proposal.description.replace(/<\/?[^>]+(>|$)/g, "").substring(0, 100) %>...
        </p>
        <% proposal.categories.forEach((categoryId)=> { %>
            <span class="badge bg-primary">
                <%= categories[categoryId] %>
            </span>
            <% }) %>
                <p class="mt-2"><b>Apoyo:</b>
                    <span class="badge 
                        <%= proposal.support ? (proposal.support === 'low' ? 'bg-danger' : proposal.support === 'medium' ? 'bg-warning' : 'bg-success') : 'bg-secondary' %>">
                        <%= proposal.support ? (proposal.support === 'low' ? 'Bajo' : proposal.support === 'medium' ? 'Medio' : 'Alto') : 'Desconocido' %>
                    </span>
                </p>
                <% if (proposal.candidatesSupporters && proposal.candidatesSupporters.length > 0) { %>
                    <p><b>Candidaturas que apoyan:</b> <%= proposal.candidatesSupporters %></p>
                <% } %>
                <button class="btn btn-link view-more" hx-get="/api/proposals/<%= proposal._id.toString() %>"
                    hx-target="#proposalDetailModal" hx-on::after-request="$('#proposalDetailModal').modal('show')">Ver
                    m√°s</button>
                <%- include('supportButton') %>
    </div>
</div>